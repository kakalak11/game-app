<<<<<<< HEAD
{"version":3,"sources":["ShipControl.js"],"names":["cc","Class","extends","Component","properties","bulletPrefab","Prefab","bulletHolder","Node","steerLeft","SpriteFrame","steerRight","steerForward","speed","onLoad","systemEvent","on","SystemEvent","EventType","KEY_UP","onKeyUp","KEY_DOWN","onKeyDown","_sprite","node","getComponentInChildren","Sprite","state","isMoving","isMovingLeft","isMovingRight","event","keyCode","macro","KEY","space","shootCommand","a","d","s","w","isMovingHorizontal","spriteFrame","bullet","instantiate","parent","position","getPosition","_steerHorizontal","isRight","_steerVertical","isForward","update","dt","x","verticalTween","stop"],"mappings":"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","file":"ShipControl.js","sourceRoot":"../../../../../assets/scripts/core","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bulletPrefab: cc.Prefab,\n        bulletHolder: cc.Node,\n\n        steerLeft: cc.SpriteFrame,\n        steerRight: cc.SpriteFrame,\n        steerForward: cc.SpriteFrame,\n\n        speed: 500,\n    },\n\n    onLoad() {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n\n        this._sprite = this.node.getComponentInChildren(cc.Sprite);\n        this.node.state = this.state = {\n            isMoving: false,\n            isMovingLeft: false,\n            isMovingRight: false,\n\n        };\n    },\n\n    onKeyUp(event) {\n        if (event.keyCode == cc.macro.KEY.space) {\n            return shootCommand();\n        }\n        const { a, d, s, w } = cc.macro.KEY;\n        switch (event.keyCode) {\n            case a:\n                this.state.isMovingLeft = false;\n                break;\n            case d:\n                this.state.isMovingRight = false;\n                break;\n            case w:\n                // this._steerVertical({ isForward: true });\n                break;\n            case s:\n                // this._steerVertical({ isForward: false });\n                break;\n        }\n        const isMovingHorizontal = this.state.isMovingLeft && this.state.isMovingRight;\n        const isMoving = (this.state.isMovingLeft || this.state.isMovingRight) && !isMovingHorizontal;\n        this.state.isMoving = isMoving;\n\n        if (!isMoving) this._sprite.spriteFrame = this.steerForward;\n    },\n\n    shootCommand() {\n        const bullet = cc.instantiate(this.bulletPrefab);\n        bullet.parent = this.bulletHolder;\n        bullet.position = this.node.getPosition();\n    },\n\n    onKeyDown(event) {\n        const { a, d, s, w } = cc.macro.KEY;\n        switch (event.keyCode) {\n            case a:\n                this._steerHorizontal({ isRight: false });\n                this.state.isMovingLeft = true;\n                break;\n            case d:\n                this._steerHorizontal({ isRight: true });\n                this.state.isMovingRight = true;\n                break;\n            case w:\n                this._steerVertical({ isForward: true });\n                break;\n            case s:\n                this._steerVertical({ isForward: false });\n                break;\n        }\n        const isMovingHorizontal = this.state.isMovingLeft && this.state.isMovingRight;\n        this.state.isMoving = (this.state.isMovingLeft || this.state.isMovingRight) && !isMovingHorizontal;\n    },\n\n    _steerHorizontal({ isRight = true }) {\n        if (isRight) this._sprite.spriteFrame = this.steerRight;\n        else this._sprite.spriteFrame = this.steerLeft;\n    },\n\n    update(dt) {\n        const { isMovingLeft, isMovingRight, isMoving } = this.state\n        if (!isMoving) return;\n        if (isMovingLeft) this.node.x += this.speed * -1 * dt;\n        if (isMovingRight) this.node.x += this.speed * dt;\n    },\n\n    _steerVertical({ isForward = true }) {\n        if (this.verticalTween) this.verticalTween.stop();\n    },\n});\n"]}
=======
{"version":3,"sources":["ShipControl.js"],"names":["cc","Class","extends","Component","properties","steerLeft","SpriteFrame","steerRight","steerForward","ship","Node","speed","onLoad","systemEvent","on","SystemEvent","EventType","KEY_UP","onKeyUp","KEY_DOWN","onKeyDown","_sprite","getComponentInChildren","Sprite","_canMoveHorizontally","_canMoveVertically","_isMovingY","_isMovingX","directionX","directionY","event","keyCode","macro","KEY","space","node","emit","position","isStopX","d","a","spriteFrame","callbackX","isStopY","w","s","callbackY","update","x","y","_changeStatic","isRight"],"mappings":"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","file":"ShipControl.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\core","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        steerLeft: cc.SpriteFrame,\r\n        steerRight: cc.SpriteFrame,\r\n        steerForward: cc.SpriteFrame,\r\n        ship: cc.Node,\r\n\r\n        speed: 500,\r\n    },\r\n\r\n    onLoad() {\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\r\n        this._sprite = this.ship.getComponentInChildren(cc.Sprite);\r\n        this._canMoveHorizontally = true;\r\n        this._canMoveVertically = true;\r\n        this._isMovingY = true;\r\n        this._isMovingX = true;\r\n        this.directionX = 0;\r\n        this.directionY = 0;\r\n    },\r\n\r\n    onKeyUp(event) {\r\n        if (event.keyCode == cc.macro.KEY.space) {\r\n            this.node.emit('BULLET_FIRE', this.ship.position);\r\n            return;\r\n        }\r\n        const isStopX = event.keyCode === cc.macro.KEY.d || event.keyCode === cc.macro.KEY.a;\r\n        if (isStopX) {\r\n            this._sprite.spriteFrame = this.steerForward;\r\n            this.directionX = 0;\r\n            this.callbackX && this.callbackX();\r\n            this.callbackX = null;\r\n        }\r\n        const isStopY = event.keyCode == cc.macro.KEY.w || event.keyCode == cc.macro.KEY.s;\r\n        if (isStopY) {\r\n            this._canMoveVertically = true;\r\n            this.directionY = 0;\r\n            this.callbackY && this.callbackY();\r\n            this.callbackY = null;\r\n        }\r\n    },\r\n\r\n    onKeyDown(event) {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.d:\r\n                this.directionX = 1;\r\n                if (this.directionX != 0) this.callbackX = () => this.directionX = 1;\r\n                break;\r\n            case cc.macro.KEY.a:\r\n                this.directionX = -1;\r\n                if (this.directionX != 0) this.callbackX = () => this.directionX = -1;\r\n                break;\r\n            case cc.macro.KEY.w:\r\n                this.directionY = 1;\r\n                if (this.directionY != 0) this.callbackY = () => this.directionY = 1;\r\n                break;\r\n            case cc.macro.KEY.s:\r\n                this.directionY = -1;\r\n                if (this.directionY != 0) this.callbackY = () => this.directionY = -1;\r\n                break;\r\n        }\r\n    },\r\n\r\n    update() {\r\n        if (this._isMovingX) {\r\n            this.ship.x += this.speed * this.directionX;\r\n        }\r\n        if (this._isMovingY) {\r\n            this.ship.y += this.speed * this.directionY;\r\n        }\r\n    },\r\n\r\n    _changeStatic(isRight) {\r\n        if (isRight) this._sprite.spriteFrame = this.steerRight;\r\n        else this._sprite.spriteFrame = this.steerLeft;\r\n    }\r\n});\r\n"]}
>>>>>>> e4ea711b27b0d189e11445f28b343159d82b74db
