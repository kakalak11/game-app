{"version":3,"sources":["ShipControl.js"],"names":["cc","Class","extends","Component","properties","bulletPrefab","Prefab","bulletHolder","Node","steerLeft","SpriteFrame","steerRight","steerForward","onLoad","systemEvent","on","SystemEvent","EventType","KEY_UP","onKeyUp","KEY_DOWN","onKeyDown","_sprite","node","getComponentInChildren","Sprite","event","keyCode","macro","KEY","space","bullet","instantiate","parent","position","getPosition","isReturnToIdle","d","a","spriteFrame","warn","_steerHorizontal","isLeft"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,sBAAcL,GAAGM,MADT;AAERC,sBAAcP,GAAGQ,IAFT;;AAIRC,mBAAWT,GAAGU,WAJN;AAKRC,oBAAYX,GAAGU,WALP;AAMRE,sBAAcZ,GAAGU;AANT,KAHP;;AAYLG,UAZK,oBAYI;AACLb,WAAGc,WAAH,CAAeC,EAAf,CAAkBf,GAAGgB,WAAH,CAAeC,SAAf,CAAyBC,MAA3C,EAAmD,KAAKC,OAAxD,EAAiE,IAAjE;AACAnB,WAAGc,WAAH,CAAeC,EAAf,CAAkBf,GAAGgB,WAAH,CAAeC,SAAf,CAAyBG,QAA3C,EAAqD,KAAKC,SAA1D,EAAqE,IAArE;;AAEA,aAAKC,OAAL,GAAe,KAAKC,IAAL,CAAUC,sBAAV,CAAiCxB,GAAGyB,MAApC,CAAf;AACH,KAjBI;AAmBLN,WAnBK,mBAmBGO,KAnBH,EAmBU;AACX,YAAIA,MAAMC,OAAN,IAAiB3B,GAAG4B,KAAH,CAASC,GAAT,CAAaC,KAAlC,EAAyC;AACrC,gBAAMC,SAAS/B,GAAGgC,WAAH,CAAe,KAAK3B,YAApB,CAAf;AACA0B,mBAAOE,MAAP,GAAgB,KAAK1B,YAArB;AACAwB,mBAAOG,QAAP,GAAkB,KAAKX,IAAL,CAAUY,WAAV,EAAlB;AACH;;AAED,YAAMC,iBAAiBV,MAAMC,OAAN,KAAkB3B,GAAG4B,KAAH,CAASC,GAAT,CAAaQ,CAA/B,IAAoCX,MAAMC,OAAN,KAAkB3B,GAAG4B,KAAH,CAASC,GAAT,CAAaS,CAA1F;AACA,YAAIF,cAAJ,EAAoB,KAAKd,OAAL,CAAaiB,WAAb,GAA2B,KAAK3B,YAAhC;AACpBZ,WAAGwC,IAAH,CAAQJ,cAAR;AACH,KA7BI;AA+BLf,aA/BK,qBA+BKK,KA/BL,EA+BY;AACb,YAAIA,MAAMC,OAAN,IAAiB3B,GAAG4B,KAAH,CAASC,GAAT,CAAaS,CAAlC,EAAqC;AACjC,iBAAKG,gBAAL,CAAsB,EAAEC,QAAQ,IAAV,EAAtB;AACH,SAFD,MAEO,IAAIhB,MAAMC,OAAN,IAAiB3B,GAAG4B,KAAH,CAASC,GAAT,CAAaQ,CAAlC,EAAqC;AACxC,iBAAKI,gBAAL,CAAsB,EAAEC,QAAQ,KAAV,EAAtB;AACH;AACJ,KArCI;AAuCLD,oBAvCK,kCAuC+B;AAAA,+BAAjBC,MAAiB;AAAA,YAAjBA,MAAiB,+BAAR,IAAQ;;AAChC,YAAIA,MAAJ,EAAY,KAAKpB,OAAL,CAAaiB,WAAb,GAA2B,KAAK9B,SAAhC,CAAZ,KACK,KAAKa,OAAL,CAAaiB,WAAb,GAA2B,KAAK5B,UAAhC;AACR;AA1CI,CAAT","file":"ShipControl.js","sourceRoot":"../../../../../assets/scripts/core","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bulletPrefab: cc.Prefab,\n        bulletHolder: cc.Node,\n\n        steerLeft: cc.SpriteFrame,\n        steerRight: cc.SpriteFrame,\n        steerForward: cc.SpriteFrame,\n    },\n\n    onLoad() {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n\n        this._sprite = this.node.getComponentInChildren(cc.Sprite);\n    },\n\n    onKeyUp(event) {\n        if (event.keyCode == cc.macro.KEY.space) {\n            const bullet = cc.instantiate(this.bulletPrefab);\n            bullet.parent = this.bulletHolder;\n            bullet.position = this.node.getPosition();\n        }\n\n        const isReturnToIdle = event.keyCode === cc.macro.KEY.d || event.keyCode === cc.macro.KEY.a;\n        if (isReturnToIdle) this._sprite.spriteFrame = this.steerForward;\n        cc.warn(isReturnToIdle);\n    },\n\n    onKeyDown(event) {\n        if (event.keyCode == cc.macro.KEY.a) {\n            this._steerHorizontal({ isLeft: true });\n        } else if (event.keyCode == cc.macro.KEY.d) {\n            this._steerHorizontal({ isLeft: false });\n        }\n    },\n\n    _steerHorizontal({ isLeft = true }) {\n        if (isLeft) this._sprite.spriteFrame = this.steerLeft;\n        else this._sprite.spriteFrame = this.steerRight;\n    }\n});\n"]}